!function(t){var s={};function e(n){if(s[n])return s[n].exports;var i=s[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)e.d(n,i,function(s){return t[s]}.bind(null,i));return n},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";e.r(s);class n{constructor(t){this.canvas=t,this.colors={oldColor:"#d4f5f4",newColor:"#000000"}}getModel(){return this.colors}}class i{constructor(t,s){this.canvas=t,this.colors=s}render(){const t=this.canvas.getContext("2d"),s=this.colors.oldColor,e=this.colors.newColor;t.fillStyle=s,t.fillRect(72,60,80,80),t.fillStyle=e,t.fillRect(32,20,80,80)}}class a{constructor(t){this.size=t,this.windowSize=768,this.data={}}getModel(){return this.getColor(),this.getSize(),this.data}getColor(){const t=[...Array(this.size)].map(()=>Array(this.size));for(let s=0;s<this.size;s+=1)for(let e=0;e<this.size;e+=1)(s+e)%2==0?t[s][e]="#d4f5f4":(s+e)%2==1&&(t[s][e]="#bedddc");this.data.defaultColor=t.map(t=>t.slice())}getSize(){this.data.onePiksel=this.windowSize/this.size,this.data.size=this.size}}class o{constructor(t){this.data=t,this.buttons=document.querySelector(".general__canvas-size"),this.canvas=document.querySelector(".canvas__general--working-canvas"),this.page=document.querySelector(".pages__page-operations--page"),this.animation=document.querySelector(".container__animation--canvas")}render(){this.delButtons(),this.renderGeneralCanvas(),this.renderPageCanvas(),this.renderAnimationCanvas()}view(t,s,e){for(let n=0;n<s;n+=1)for(let i=0;i<s;i+=1)t.fillStyle=this.data.defaultColor[n][i],t.fillRect(e*i,e*n,e*(i+1),e*(n+1))}delButtons(){this.canvas.classList.remove("none"),this.buttons.classList.add("none"),this.page.classList.remove("none"),this.animation.classList.remove("none")}renderGeneralCanvas(){const t=this.canvas.getContext("2d"),s=this.data.size,e=this.data.onePiksel;this.view(t,s,e)}renderPageCanvas(){const t=this.page.getContext("2d"),s=this.data.size,e=this.data.onePiksel/6;this.view(t,s,e)}renderAnimationCanvas(){const t=this.animation.getContext("2d"),s=this.data.size,e=this.data.onePiksel/3;this.view(t,s,e)}}class r{constructor(t){this.tool=t}isActive(){this.tool.button.classList.add("is-active")}}class c{constructor(t){this.tool=t}isNoActive(){this.tool.button.classList.remove("is-active")}}class l{constructor(t,s){this.canvas=document.querySelector(".canvas__general--working-canvas"),this.page=document.querySelector(".pages__page-operations--page"),this.animation=document.querySelector(".container__animation--canvas"),this.arr=t,this.size=s}viewPenStart(){this.renderGeneralCanvas(),this.renderPageCanvas(),this.renderAnimationCanvas()}view(t,s,e){for(let n=0;n<s;n+=1)for(let i=0;i<s;i+=1)t.fillStyle=this.arr[n][i],t.fillRect(e*i,e*n,e*(i+1),e*(n+1))}renderGeneralCanvas(){const t=this.canvas.getContext("2d"),s=this.size.size,e=this.size.onePiksel;this.view(t,s,e)}renderPageCanvas(){const t=this.page.getContext("2d"),s=this.size.size,e=this.size.onePiksel/6;this.view(t,s,e)}renderAnimationCanvas(){const t=this.animation.getContext("2d"),s=this.size.size,e=this.size.onePiksel/3;this.view(t,s,e)}}class h{constructor(t,s,e,n,i){this.canvas=document.querySelector(".canvas__general--working-canvas"),this.size=t,this.color=s,this.targetX=e,this.targetY=n,this.arr=i}modelPenStart(){this.target(),this.canvasArr()}target(){this.CanvasX=Math.floor(this.targetX/this.size.onePiksel),this.CanvasX>=this.size.size&&(this.CanvasX=this.size.size-1),this.CanvasY=Math.floor(this.targetY/this.size.onePiksel),this.CanvasY>=this.size.size&&(this.CanvasY=this.size.size-1),this.oldCanvasX=Math.floor(this.arr[0]/this.size.onePiksel),this.oldCanvasX>=this.size.size&&(this.oldCanvasX=this.size.size-1),this.oldCanvasY=Math.floor(this.arr[1]/this.size.onePiksel),this.oldCanvasY>=this.size.size&&(this.oldCanvasY=this.size.size-1)}canvasArr(){this.arrColor=this.size.defaultColor,this.newColor=this.color.newColor,this.arrColor[this.CanvasY][this.CanvasX]=this.newColor,this.oldCanvasX-this.CanvasX==0&&this.oldCanvasY-this.CanvasY==0||this.line(this.oldCanvasX,this.oldCanvasY,this.CanvasX,this.CanvasY),new l(this.arrColor,this.size).viewPenStart()}line(t,s,e,n){let i=t,a=s;const o=Math.abs(e-i),r=Math.abs(n-a),c=i<e?1:-1,l=a<n?1:-1;let h=o-r;for(;this.arrColor[a][i]=this.newColor,i!==e||a!==n;){const t=2*h;t>-r&&(h-=r,i+=c),t<o&&(h+=o,a+=l)}}}var u=function(t,s){let e,n;const i=[];let a=!1;const o=document.querySelector(".canvas__general--working-canvas"),r=()=>{a=!0},c=o=>{a&&(e=o.offsetX,n=o.offsetY,i.push(e,n),i.length>4&&(i.shift(),i.shift()),new h(t,s,e,n,i).modelPenStart())},l=()=>{a=!1,o.removeEventListener("mousedown",r),o.removeEventListener("mousemove",c),document.removeEventListener("mouseup",l)};o.addEventListener("mousedown",r),o.addEventListener("mousemove",c),document.addEventListener("mouseup",l)};class v{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class d{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class g{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class m{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class f{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class _{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class C{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class z{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class w{constructor(){this.canvas=document.querySelector(".canvas__general--working-canvas")}start(){console.log(this.canvas,1)}}class S{constructor(t,s,e){this.targetInstrument=t,this.size=s,this.color=e}start(){if("instruments__buttons--pen"===this.targetInstrument.classList[0])u(this.size,this.color);else if("instruments__buttons--color-select"===this.targetInstrument.classList[0]){(new v).start()}else if("instruments__buttons--paint-bucket"===this.targetInstrument.classList[0]){(new d).start()}else if("instruments__buttons--ereser"===this.targetInstrument.classList[0]){(new g).start()}else if("instruments__buttons--stroke"===this.targetInstrument.classList[0]){(new m).start()}else if("instruments__buttons--circle"===this.targetInstrument.classList[0]){(new f).start()}else if("instruments__buttons--move"===this.targetInstrument.classList[0]){(new _).start()}else if("instruments__buttons--shape-selection"===this.targetInstrument.classList[0]){(new C).start()}else if("instruments__buttons--lighten"===this.targetInstrument.classList[0]){(new z).start()}else if("instruments__buttons--dithering"===this.targetInstrument.classList[0]){(new w).start()}else console.log("no instrument")}}const y=document.getElementById("general"),b=new class{constructor(){this.canvasColors=document.querySelector(".instruments__colors--color")}start(){this.model=new n(this.canvasColors),this.data=this.model.getModel(),this.view=new i(this.canvasColors,this.data),this.view.render()}};b.start();const p=new class{constructor(t){this.root=t,this.buttonSize32=document.querySelector(".general__canvas-size--32x32"),this.buttonSize64=document.querySelector(".general__canvas-size--64x64"),this.buttonSize128=document.querySelector(".general__canvas-size--128x128")}start(){this.addListeners()}next(t){this.model=new a(t),this.data=this.model.getModel(),this.view=new o(this.data),this.view.render()}addListeners(){this.buttonSize32.addEventListener("click",()=>{this.next(32)}),this.buttonSize64.addEventListener("click",()=>{this.next(64)}),this.buttonSize128.addEventListener("click",()=>{this.next(128)})}}(y);p.start(),new class{constructor(t,s){this.checkSize=t,this.defaultColor=s,this.tool={isActive:!1}}startInstrument(){const t=this.tool.button,s=this.checkSize.data,e=this.defaultColor.data;new S(t,s,e).start()}target(){document.addEventListener("click",t=>{if(t.target.closest(".instrument")){!0===this.tool.isActive&&(new c(this.tool).isNoActive(),this.tool.isActive=!1);const s=t.target;this.tool.button=s,new r(this.tool).isActive(),this.tool.isActive=!0}this.startInstrument()})}}(p,b).target()}]);
//# sourceMappingURL=app.bundle.js.map